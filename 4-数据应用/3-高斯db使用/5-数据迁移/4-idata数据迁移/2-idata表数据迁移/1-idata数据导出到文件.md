# 大数据数据迁移

** 详细步骤参考 5-数据迁移 -> 2-数据迁移工具使用 -> 0-实际使用 **

## 导出数据到文件

### 配置 cfg.ini
```
{
"flow_type":1,
"export_db":{
"database_type":2,
"db":{
"ip":"10.120.58.183",
"username":"C##GALAXY",
"password":"加密后的数据库密码，加密方法在 5-数据迁移 -> 数据迁移工具使用",
"port":1521,
"db_name":"",
"server_name":"orcla1"
}
},

"import_db":{
"database_type":2,
"db":{
"ip":"",
"username":"",
"password":"",
"port":1888
},
"server":{
"ip":"",
"username":"",
"password":"",
"port":22
}
},

"data_path":{
"export_local_path":"H:\\idata\\gaussdba\\dbdatas",
"export_remote_path":{
"ip":"",
"username":"",
"password":"",
"port":22,
"path":""
},
"import_local_path":"",
"import_remote_path":{
"ip":"",
"username":"",
"password":"",
"port":22,
"path":""
}
},


"option":{

"column_separator":"~##~",
"row_separator":"@#\n#@",
"data_check_type":1,
"compression_before_translate":false,
"disable_foreign_key":true,
"check_ddl":true,
"delete_file":false,
"ignore_lost_table":2,
"disable_trigger":true,

"import_nologging":false,
"import_threads_per_obj":10,
"import_total_task":5,
"import_allow_max_errors":0,
"import_force":false,
"import_check_row_count":false,
"truncate_before_import_db_data":true,

"export_total_task":10,
"export_allow_max_errors":0,
"export_force":false,
"export_check_row_count":false,
"export_append_on":false,
"export_max_rownum":-1
}
}
```
### 配置 exp_obj.ini
```
C##GALAXY.EBG_AREA_LIST
C##GALAXY.EBG_CONDITION_FROM_LIST
C##GALAXY.EBG_CUSTOMER_CID_LOSE
C##GALAXY.EBG_CUSTOMER_DEVICE_TEST
C##GALAXY.EBG_CUSTOMER_INFO_IOT
C##GALAXY.EBG_CUSTOMER_IOT
C##GALAXY.EBG_CUSTOMER_NAME
C##GALAXY.EBG_CUSTOMER_SCENE_ID
C##GALAXY.EBG_CUSTOMER_SCENE_SITE
C##GALAXY.EBG_CUSTOREM_COMMENT
C##GALAXY.EBG_CUSTOREM_DEVICE
C##GALAXY.EBG_CUSTOREM_DEVICE_BACKUP
C##GALAXY.EBG_CUSTOREM_DEVICE_COPY
C##GALAXY.EBG_CUSTOREM_MODIFY
C##GALAXY.EBG_CUSTOREM_OPERATE_RECORD
C##GALAXY.EBG_CUSTOREM_RECORD_INFO
C##GALAXY.EBG_CUSTOREM_RECORD_INFO_TEST
C##GALAXY.EBG_CUSTOREM_SCENE
C##GALAXY.EBG_CUSTOREM_SCENE_MATCH
C##GALAXY.EBG_CUSTOREM_SCENE_SIT_MATCH
C##GALAXY.EBG_HISTORY_RECORD
C##GALAXY.EBG_RECORD_ASSOCIATE_OPERATE
C##GALAXY.EBG_TYPE_LIST
C##GALAXY.EBG_WLAN_CATAGORY_RECORD
C##GALAXY.ENS_SYS_AUTHORITY
C##GALAXY.T_AC_ENS_ALARM_MATCH
C##GALAXY.T_AC_ENS_HARDWARE_MATCH
C##GALAXY.T_AC_ENS_LOG_MATCH
C##GALAXY.T_CASENUM_RELATIONSHIP
C##GALAXY.T_CC_ENS_CMD
C##GALAXY.T_CC_ENS_LEVELCASENUM
C##GALAXY.T_CC_TASK
C##GALAXY.T_CUBE_ENS_ALARM
C##GALAXY.T_CUBE_ENS_BUSINESS
C##GALAXY.T_CUBE_ENS_CMD
C##GALAXY.T_CUBE_ENS_GIVEN_RISK
C##GALAXY.T_CUBE_ENS_HARDWARE
C##GALAXY.T_CUBE_ENS_HBASE_ROWKEY
C##GALAXY.T_CUBE_ENS_INSP
C##GALAXY.T_CUBE_ENS_LOG_MATCH
C##GALAXY.T_CUBE_ENS_NE
C##GALAXY.T_CUBE_ENS_NE_CMD
C##GALAXY.T_CUBE_ENS_SITETREE
C##GALAXY.T_CUBE_ENS_TRADE
C##GALAXY.T_ENS_ALARM_BASE
C##GALAXY.T_ENS_ALL_LASTMONTH
C##GALAXY.T_ENS_ALL_RESULT
C##GALAXY.T_ENS_ALL_RINGCHART
C##GALAXY.T_ENS_CLI_BASE
C##GALAXY.T_ENS_CMD_DATECOVER
C##GALAXY.T_ENS_FILE_SIZE
C##GALAXY.T_ENS_LOG_BASE
C##GALAXY.T_ENS_MIB_BASE
C##GALAXY.T_ENS_MIB_MATCH
C##GALAXY.T_ENS_RISK
C##GALAXY.T_ENS_SCENE_COVER
C##GALAXY.T_ENS_SCENE_DATECOVER
C##GALAXY.T_ENS_TEST_CMD_DATECOVER
C##GALAXY.T_ENS_YANG_BASE
C##GALAXY.T_FC_BUSINESS
C##GALAXY.T_FC_PATTERN
C##GALAXY.T_FC_PATTERN_MATCH
C##GALAXY.T_FC_TYPE_PATTERN
C##GALAXY.T_ILOG_PV_STA
C##GALAXY.T_ILOG_PVP_STA
C##GALAXY.T_JIRA_INFO
C##GALAXY.T_JIRA_UPDATETIME
C##GALAXY.T_NA_CUSTOMER_LIST
C##GALAXY.T_NA_INDUSTRY_SCENE
C##GALAXY.T_NA_INDUSTRY_SCENE_PARA
C##GALAXY.T_NA_SCENE_TEST_RESULT
C##GALAXY.T_PDU_FILE_SIZE
C##GALAXY.T_SCENES_TEST_BUSINESS
C##GALAXY.T_SCENES_TEST_DATAINFO
C##GALAXY.T_SCENES_TEST_DEVICE
C##GALAXY.T_SMART_FACTORY_DOMAIN
C##GALAXY.T_SMART_FACTORY_FILE_SYC
C##GALAXY.T_SMART_FACTORY_LINK
C##GALAXY.T_SMART_FACTORY_TEP
C##GALAXY.T_SMART_FACTORY_TICC_BLOCK
C##GALAXY.T_SMART_FACTORY_TICC_ENV_BUSY
C##GALAXY.T_SMART_FACTORY_TICC_TASK
C##GALAXY.T_SYS_LOGIN
C##GALAXY.T_TEST_ALARM_DATECOVER
C##GALAXY.T_TEST_ALL_LASTMONTH
C##GALAXY.T_TEST_BUSINESS_DATECOVER
C##GALAXY.T_TEST_CMD_DATECOVER
C##GALAXY.T_TEST_FEATURE_RISK_CHART
C##GALAXY.T_TEST_LOG_DATECOVER
C##GALAXY.T_TEST_RISK
C##GALAXY.T_TEST_RISK_CHART
C##GALAXY.T_TEST_RISK_TOP5
C##GALAXY.T_TEST_SCENE_COVER
C##GALAXY.T_TEST_SCENE_DATECOVER
C##GALAXY.T_TEST_YANG_MATCH
C##GALAXY.T_TESTCASE_BASELINE
C##GALAXY.T_TESTCASE_BED
C##GALAXY.T_TESTCASE_DEV
C##GALAXY.T_TESTCASE_DEVIP
C##GALAXY.T_TESTCASE_DTS
C##GALAXY.T_TESTCASE_ILOG_RESULT
C##GALAXY.T_TESTCASE_LCM_BED_DEV
C##GALAXY.T_TESTCASE_TESTSUIT_RECORD
C##GALAXY.T_TESTCASE_TESTSUIT_RECORD_NEW
C##GALAXY.T_TESTCASE_VENEER_INFO
C##GALAXY.T_TESTCASE_VERSION_MAPPER
C##GALAXY.T_CC_ENS_MATCH
```
下面这两个表比较大。
- C##GALAXY.T_TESTCASE_ILOG_RESULT
- C##GALAXY.T_CC_ENS_MATCH

### 保存 ddlResult 文件夹

在迁移软件的jar包所在目录，将ddlResult文件夹备份下。 
此文件里记录了 导出时记录的表结构信息。 
在下一步，进行数据导入时，会根据这个来导数据。

### 运行程序
```
java -jar DSS.jar -i G:\9-work\7-高斯数据库\高斯\高斯100\数据迁移工具\DataMigration\config\exp_obj.ini
```
