<h1><strong>唯一索引和主键索引介绍</strong></h1>

<p><strong>唯一索引</strong><br />
唯一索引不允许两行具有相同的索引值。<br />
如果现有数据中存在重复的键值，则大多数数据库都不允许将新创建的唯一索引与表一起保存。当新数据将使表中的键值重复时，数据库也拒绝接受此数据。例如，如果在 employee 表中的职员姓氏(lname) 列上创建了唯一索引，则所有职员不能同姓。</p>

<p><strong>主键索引</strong><br />
主键索引是唯一索引的特殊类型。<br />
数据库表通常有一列或列组合，其值用来唯一标识表中的每一行。该列称为表的主键。<br />
在数据库关系图中为表定义一个主键将自动创建主键索引，主键索引是唯一索引的特殊类型。主键索引要求主键中的每个值是唯一的。当在查询中使用主键索引时，它还允许快速访问数据。</p>

<p>它们的一些比较：<br />
(1)对于主健/unique constraint ， oracle/sql server/mysql等都会自动建立唯一索引；<br />
(2)主键不一定只包含一个字段，所以如果你在主键的其中一个字段建唯一索引还是必要的；<br />
(3)主健可作外健，唯一索引不可；<br />
(4)主健不可为空，唯一索引可；<br />
(5)主健也可是多个字段的组合；<br />
(6)主键与唯一索引不同的是：<br />
a.有not null属性；<br />
b.每个表只能有一个。</p>

<p> </p>

<h2><strong>1</strong><strong>、主键</strong></h2>

<p>主键ID，主键既是约束也是索引，同时也用于对象缓存的键值。</p>

<h2><strong>2</strong><strong>、索引</strong></h2>

<p>       *组合或者引用关系的子表（数据量较大的时候），需要在关联主表的列上建立非聚集索引（如订单明细表中的产品ID字段、订单明细表中关联的订单ID字段）</p>

<p>       *索引键的大小不能超过900个字节，当列表的大小超过900个字节或者若干列的和超过900个字节时，数据库将报错。</p>

<p>       *表中如果建有大量索引将会影响INSERT、UPDATE和DELETE语句的性能，因为在表中的数据更改时，所有的索引都将必须进行适当的调整。需要避免对经常更新的表进行过多的索引，并且索引应保持较窄，就是说：列要尽可能的少。</p>

<p>       *为经常用于查询的谓词创建索引，如用于下拉参照快速查找的code、name等。在平台现有下拉参照的查询sql语句中的like条件语句要改成不带前置通配符。还有需要关注Order By和Group By谓词的索引设计，Order By和Group By的谓词是需要排序的，某些情况下为Order By和Group By的谓词建立索引，会避免查询时的排序动作。</p>

<p>       *对于内容基本重复的列，比如只有1和0，禁止建立索引，因为该索引选择性极差，在特定的情况下会误导优化器做出错误的选择，导致查询速度极大下降。</p>

<p>      *当一个索引有多个列构成时，应注意将选择性强的列放在前面。仅仅前后次序的不同，性能上就可能出现数量级的差异。</p>

<p>       *对小表进行索引可能不能产生优化效果，因为查询优化器在遍历用于搜索数据的索引时，花费的时间可能比执行简单的表扫描还长，设计索引时需要考虑表的大小。记录数不大于100的表不要建立索引。频繁操作的小数量表不建议建立索引（记录数不大于5000条）</p>

<p> 扩展阅读：</p>
