# 死锁

## 代码案例

详细代码参考  **chapter01.DeadLockDemo**

不要点debug 而是run，你会发现程序走不下去了。。

线程一 获取锁A，等待锁B，线程二，获取锁B，等待锁A。两个线程都无法执行完。

## 减少死锁措施
现在我们介绍避免死锁的几个常见方法。
- 避免一个线程同时获取多个锁。
- 避免一个线程在锁内同时占用多个资源，尽量保证每个锁只占用一个资源。
- 尝试使用定时锁，使用lock.tryLock（timeout）来替代使用内部锁机制。
- 对于数据库锁，加锁和解锁必须在一个数据库连接里，否则会出现解锁失败的情况。